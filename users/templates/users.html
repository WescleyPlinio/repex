{% extends 'base_user.html' %}
{% load static %}
{% block title %}
  Gestão de usuários
{% endblock %}

{% block content %}
  <div class="card mb-3">
    <div class="card-header d-flex">
      <h3 class="card-title fw-bold my-auto">Usuários</h3>
    </div>
    <div class="card-body table-responsive p-0">
      <table class="table table-hover text-nowrap">
        <thead>
          <tr>
            <th>ID</th>
            <th>Matrícula</th>
            <th>Nome</th>
            <th>Permissão de professor</th>
            <th>Super usuário</th>
          </tr>
        </thead>
        <tbody>
          {% for u in resultados %}
            <tr>
              <td>{{ u.id }}</td>
              <td>{{ u.username }}</td>
              <td>{{ u.nome_usual }}</td>
              <td>
                <form class="m-0" method="post" data-url="{% url 'toggle_professor' u.id %}">
                  {% csrf_token %}
                  <div class="form-check form-switch d-flex justify-content-center">
                    {% if u.pk != 1 %}
                    <input class="form-check-input toggle-professor" type="checkbox" name="is_professor" {% if u.is_professor %}checked{% endif %}/>
                    {% else %}
                    <input class="form-check-input" type="checkbox" checked disabled/>
                    {% endif %}
                  </div>
                </form>
              </td>
              <td>
                <form class="m-0" method="post" data-url="{% url 'toggle_superuser' u.id %}">
                  {% csrf_token %}
                  <div class="form-check form-switch d-flex justify-content-center">
                    {% if u.pk != 1 %}
                    <input class="form-check-input toggle-superuser" type="checkbox" {% if u.is_superuser %}checked{% endif %}/>
                    {% else %}
                    <input class="form-check-input" type="checkbox" checked disabled/>
                    {% endif %}
                  </div>
                </form>
              </td>
              <td class="d-flex gap-2">
                <a href="{% url 'profile_detail' u.id %}" class="btn btn-sm btn-primary">Ver</a>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
  {% include 'partials/_paginacao_users.html' %}
  {% block extra_scripts %}
    <script></script>
  {% endblock %}
{% endblock %}
