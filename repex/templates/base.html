{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      {% block title %}
        Repex
      {% endblock %}
    </title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;1,300&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="{% static 'main.css' %}" />
  </head>
  <body class="d-flex flex-column min-vh-100">
    {% include 'partials/_navbar.html' %}
    <nav style="{% if identidade_visual.cor_suplente %}background: linear-gradient(to right, {{ identidade_visual.cor_sistema }}, {{ identidade_visual.cor_suplente }});
      {% else %}
        background-color: {{ identidade_visual.cor_sistema }};
      {% endif %}">
      <div class="container">
        {% block nav_bottom %}

        {% endblock %}
      </div>
    </nav>

    {% if messages %}
      <div class="container mt-3">
        {% for message in messages %}
          <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
          </div>
        {% endfor %}
      </div>
    {% endif %}

    <main class="flex-grow-1 container my-5">
      {% block content %}

      {% endblock %}
    </main>

    {% include 'partials/_footer.html' %}

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
    <script src="{% static 'main.js' %}"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    {% block extra_scripts %}

    {% endblock %}
    <script>
      $(document).on('keyup', '#search-projetos', function () {
        let query = $(this).val();

        $.ajax({
          url: "{% url 'ajax_projetos' %}",
          type: "GET",
          data: { q: query },
          beforeSend: function () {
            $('#spinner').show();
          },
          success: function (data) {
            $('#ajax_projetos').html(data.html);
          },
          complete: function () {
            $('#spinner').hide();
          }
        });
      });

      $(document).on('click', '#ajax_noticias .pagination a', function (e) {
        e.preventDefault()
        let url = $(this).attr('href')
      
        $.ajax({
          url: url,
          type: 'GET',
          beforeSend: function () {
            $('#spinner2').show()
          },
          success: function (data) {
            $('#ajax_noticias').html(data.html)
          },
          complete: function () {
            $('#spinner2').hide()
          }
        })
      })
    </script>
  </body>
</html>
